<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Edit Post</title>
    <link rel="stylesheet" href="/assets/styles.css">
    <meta name="description"
          content="A TailwindCSS UI for a social learning platform built for Spring MVC.">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
          theme: {
            extend: {
              colors: {
                primary: {
                  50: '#eef2ff', 100: '#e0e7ff', 200: '#c7d2fe', 300: '#a5b4fc', 400: '#818cf8', 500: '#6366f1', 600: '#4f46e5', 700: '#4338ca', 800: '#3730a3', 900: '#312e81'
                },
              }
            }
          }
        }
    </script>
</head>
<body class="bg-gray-100 p-8">

<div class="max-w-2xl mx-auto bg-white rounded-2xl shadow p-6">
    <!-- Logo -->
    <a class="flex items-center gap-3 mb-8" th:href="@{/home}">
        <span class="inline-flex h-12 w-12 items-center justify-center rounded-full
                     bg-gradient-to-br from-primary-500 to-primary-700
                     text-white font-extrabold text-lg shadow-md transform transition
                     hover:scale-110">
            GS
        </span>
        <span class="text-2xl font-bold text-indigo-900 drop-shadow-sm">Global Sphere</span>
    </a>

    <h2 class="text-xl font-semibold mb-4">Edit Post</h2>
    <form th:action="@{/feeds/edit/{id}(id=${post.id})}" method="post"
          th:object="${updateFeedDto}" class="space-y-4"
          enctype="multipart/form-data">
        <!-- Post Content -->
        <label class="block">
            <span class="text-gray-700">Content</span>
            <textarea th:field="*{content}" rows="4"
                      class="w-full p-2 border rounded"></textarea>
            <p class="text-red-600 text-sm"
               th:if="${#fields.hasErrors('content')}"
               th:errors="*{content}"></p>
        </label>

        <!-- Code Snippet -->
        <label class="block">
            <span class="text-gray-700">Code Snippet (optional)</span>
            <textarea th:field="*{codeSnippet}" rows="4"
                      class="w-full p-2 border rounded"></textarea>
            <p class="text-red-600 text-sm"
               th:if="${#fields.hasErrors('codeSnippet')}"
               th:errors="*{codeSnippet}"></p>
        </label>

        <!-- Link -->
        <label class="block">
            <span class="text-gray-700">External Link (optional)</span>
            <input type="text" th:field="*{link}"
                   class="w-full p-2 border rounded">
            <p class="text-red-600 text-sm" th:if="${#fields.hasErrors('link')}"
               th:errors="*{link}"></p>
        </label>
        <!-- File Upload -->
        <div>
            <button class="rounded-xl border border-gray-200 px-3 py-1.5 text-sm hover:bg-gray-50"
                    id="uploadFileBtn-edit"
                    type="button">
                Upload file
            </button>
            <input class="hidden" id="fileInput-edit" th:field="*{file}"
                   type="file" accept="image/*"/>
            <p class="text-red-500 text-sm mt-1" th:errors="*{file}"
               th:if="${#fields.hasErrors('file')}"></p>
        </div>
        <div class="flex justify-end gap-2">
            <a th:href="@{/home}"
               class="px-4 py-2 bg-gray-300 rounded hover:bg-gray-400">Cancel</a>
            <button type="submit"
                    class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
                Update Post
            </button>
        </div>
    </form>
    <!-- Footer -->
    <div class="mt-5">
        <div th:replace="~{/fragments/footer/footer :: footer}"></div>
    </div>
</div>


<script th:src="@{/js/edit-feed.js}"></script>
</body>
</html>
