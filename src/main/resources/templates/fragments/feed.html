<article class="rounded-2xl border bg-white p-5 shadow-sm w-full max-w-full"
         th:fragment="feedItem(article)">
    <header class="flex items-start gap-3">
        <!-- Avatar -->
        <img alt="avatar" class="h-10 w-10 rounded-full flex-shrink-0"
             th:src="${article.avatar}"/>

        <!-- Content -->
        <div class="flex-1 min-w-0"> <!-- prevents overflow -->
            <div class="flex items-center justify-between">
                <div class="min-w-0">
                    <h5 class="font-semibold truncate"
                        th:text="${article.author}">Author Name</h5>
                    <p class="text-xs text-gray-500"
                       th:text="${article.role + ' ‚Ä¢ ' + article.timeAgo}">Role
                        ‚Ä¢ Time</p>
                </div>
            </div>

            <!-- Post content -->
            <p class="mt-3 break-words whitespace-pre-wrap"
               th:text="${article.content}">Post content here...</p>

            <!-- Code Snippet -->
            <pre class="mt-3 overflow-x-auto rounded-xl bg-gray-900 p-4 text-xs text-gray-100 max-w-full"
                 th:if="${article.codeSnippet != null}">
                <code class="whitespace-pre"
                      th:text="${article.codeSnippet}">// code snippet</code>
            </pre>

            <!-- Action buttons -->
            <div class="mt-4 flex items-center gap-4 text-sm text-gray-600">
                <button class="inline-flex items-center gap-1 rounded-lg px-2 py-1 hover:bg-gray-50">
                    üëç <span th:text="${article.likes}">0</span>
                </button>
                <button type="button"
                        class="inline-flex items-center gap-1 rounded-lg px-2 py-1 hover:bg-gray-50"
                        onclick="document.getElementById('commentModal').classList.remove('hidden')">
                    Comment
                </button>
                <button class="ml-auto inline-flex items-center gap-1 rounded-lg px-2 py-1 hover:bg-gray-50">
                    Save
                </button>
            </div>

            <!-- Comments section -->
            <div class="mt-4 space-y-3" th:if="${article.comments != null}">
                <div class="flex items-center justify-between">
                    <h6 class="text-sm font-semibold text-gray-600">Comments</h6>
                    <button type="button"
                            class="show-comments-btn text-sm text-indigo-600 hover:underline">
                        Show
                    </button>
                </div>

                <div class="mt-2 space-y-3 hidden comments-list">
                    <div th:each="comment : ${article.comments}" class="flex items-start gap-3">
                        <img alt="avatar" class="h-8 w-8 rounded-full"
                             th:src="${comment.avatar != null ? comment.avatar : '/assets/blank.jpg'}"/>
                        <div class="flex-1">
                            <p class="text-sm font-medium" th:text="${comment.author}">Comment Author</p>
                            <p class="text-xs text-gray-500" th:text="${comment.timeAgo}">Just now</p>
                            <p class="text-sm mt-1 break-words whitespace-pre-wrap"
                               th:text="${comment.text}">Comment text...</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>
</article>


