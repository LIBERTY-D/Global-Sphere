<div id="followModal" th:fragment="followModal(currentUser)"
     class="fixed inset-0 z-50 hidden overflow-y-auto bg-black/50">
    <div class="flex items-center justify-center min-h-screen px-4">
        <div class="bg-white rounded-2xl shadow-lg w-full max-w-2xl mx-auto overflow-hidden">
            <!-- Modal Header -->
            <div class="flex justify-between items-center px-6 py-4 border-b border-gray-200">
                <h2 class="text-xl font-semibold text-gray-800">Connections</h2>
                <button class="text-gray-500 hover:text-gray-800"
                        id="followers-following-close-id-x">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6"
                         fill="none"
                         viewBox="0 0 24 24" stroke="currentColor"
                         stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round"
                              d="M6 18L18 6M6 6l12 12"/>
                    </svg>
                </button>
            </div>

            <!-- Tabs -->
            <div class="flex border-b border-gray-200">
                <button id="followersTab"
                        class="flex-1 text-center px-4 py-2 font-semibold text-primary-600 border-b-2 border-primary-600">
                    Followers
                </button>
                <button id="followingTab"
                        class="flex-1 text-center px-4 py-2 font-semibold text-gray-500 hover:text-primary-600">
                    Following
                </button>
            </div>

            <!-- Modal Body -->
            <div class="px-6 py-4 max-h-96 overflow-y-auto">
                <!-- Followers List -->
                <div id="followersContent" class="space-y-3">
                    <div th:each="follower : ${currentUser.followers}"
                         class="flex items-center justify-between p-2 rounded-lg hover:bg-gray-50">
                        <div class="flex items-center gap-3">
                            <img th:src="${follower == null or follower.avatar == null}? @{/assets/blank.jpg}: @{/user/{id}/avatar(id=${follower.id})}"
                                 alt="Avatar"
                                 class="h-10 w-10 rounded-full object-cover border-2 border-gray-200">
                            <div>
                                <p class="font-semibold text-gray-700"
                                   th:text="${follower.name}">Follower Name</p>
                                <p class="text-sm text-gray-500"
                                   th:text="${follower.email}">
                                    email@example.com</p>
                            </div>
                        </div>
                        <a th:if="${follower.following}"
                           th:href="@{user/remove/follower(id=${follower.id})}"
                           class="px-3 py-1 text-sm font-semibold rounded-lg bg-red-500 text-white hover:bg-red-600">
                            remove
                        </a>
                        <!--                        <a th:unless="${follower.following}"-->
                        <!--                           th:href="@{/user/follow(id=${follower.id})}"-->
                        <!--                           class="px-3 py-1 text-sm font-semibold rounded-lg bg-primary-600 text-white hover:bg-primary-700">-->
                        <!--                            Follow-->
                        <!--                        </a>-->
                    </div>
                </div>

                <!-- Following List -->
                <div id="followingContent" class="space-y-3 hidden">
                    <div th:each="followee : ${currentUser.following}"
                         class="flex items-center justify-between p-2 rounded-lg hover:bg-gray-50">
                        <div class="flex items-center gap-3">
                            <img
                                    th:src="${followee == null or followee.avatar == null}? @{/assets/blank.jpg}: @{/user/{id}/avatar(id=${followee.id})}"
                                    alt="Avatar"
                                    class="h-10 w-10 rounded-full object-cover border-2 border-gray-200">
                            <div>
                                <p class="font-semibold text-gray-700"
                                   th:text="${followee.name}">Following Name</p>
                                <p class="text-sm text-gray-500"
                                   th:text="${followee.email}">
                                    email@example.com</p>
                            </div>
                        </div>
                        <a th:href="@{/user/unfollow(id=${followee.id})}"
                           class="px-3 py-1 text-sm font-semibold rounded-lg bg-red-500 text-white hover:bg-red-600">
                            Unfollow
                        </a>
                    </div>
                </div>
            </div>

            <!-- Footer -->
            <div class="px-6 py-4 border-t border-gray-200 flex justify-end">
                <button id="followers-following-close-id-btn"
                        class="px-4 py-2 rounded-lg bg-gray-200 text-gray-700 font-semibold hover:bg-gray-300">
                    Close
                </button>
            </div>
        </div>
    </div>
</div>

